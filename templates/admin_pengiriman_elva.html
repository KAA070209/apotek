<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Pengiriman - Apotek Elva</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        body {
            background: linear-gradient(135deg, #e3f2fd, #f1f8ff);
            font-family: 'Segoe UI', sans-serif;
        }

        /* SIDEBAR */
        .sidebar {
            width: 230px;
            height: 100vh;
            position: fixed;
            background: linear-gradient(180deg, #0d47a1, #1565c0);
            color: white;
            padding-top: 20px;
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.1);
        }

        .sidebar h4 {
            text-align: center;
            font-weight: bold;
            margin-bottom: 30px;
        }

        .sidebar a {
            color: white;
            display: flex;
            align-items: center;
            padding: 14px 20px;
            text-decoration: none;
            margin: 6px 12px;
            border-radius: 12px;
            transition: 0.3s;
        }

        .sidebar a i {
            margin-right: 12px;
        }

        .sidebar a:hover,
        .sidebar a.active {
            background: white;
            color: #1565c0;
        }

        /* CONTENT */
        .content {
            margin-left: 250px;
            padding: 30px;
        }

        /* HEADER */
        .header-box {
            background: white;
            padding: 20px;
            border-radius: 18px;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
            margin-bottom: 25px;
        }

        /* CARD */
        .card-super {
            border: none;
            border-radius: 18px;
            padding: 20px;
            background: linear-gradient(145deg, #ffffff, #f5faff);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
        }

        .title {
            font-weight: 600;
            color: #1565c0;
        }
   
.bottom-nav{
    display:none;
}

@media (max-width:768px){

    .sidebar{
        display:none;
    }

    .content{
        margin-left:0;
        padding:15px;
        padding-bottom:95px;
    }

    .header-box{
        padding:14px;
        border-radius:14px;
    }

    .header-box h3{
        font-size:18px;
    }

    .card-super{
        padding:14px;
        border-radius:14px;
    }

    .card-super h3{
        font-size:18px;
    }

    .card-super h6{
        font-size:13px;
    }

    table{
        font-size:12px;
    }

    /* ===== BOTTOM NAV HP ===== */
    .bottom-nav{
        position:fixed;
        bottom:0;
        left:0;
        width:100%;
        height:70px;
        background:#ffffff;
        display:flex;
        justify-content:space-around;
        align-items:center;
        box-shadow:0 -5px 20px rgba(0,0,0,0.08);
        z-index:1000;
        border-top-left-radius:20px;
        border-top-right-radius:20px;
    }

    .bottom-nav a{
        flex:1;
        text-decoration:none;
        color:#94a3b8;
        font-size:10px;
        display:flex;
        flex-direction:column;
        align-items:center;
        justify-content:center;
        transition:0.3s ease;
        position:relative;
    }

    .bottom-nav a i{
        font-size:18px;
        margin-bottom:3px;
    }

    .bottom-nav a.active{
        color:#1565c0;
        font-weight:600;
        transform:translateY(-5px);
    }

    .bottom-nav a.active::after{
        content:"";
        width:5px;
        height:5px;
        background:#1565c0;
        border-radius:50%;
        position:absolute;
        bottom:6px;
    }

}

/* ===== OFFCANVAS MOBILE ===== */
.custom-offcanvas{
    height:85vh !important;
    border-top-left-radius:25px;
    border-top-right-radius:25px;
}

.custom-offcanvas .list-group-item{
    border:none;
    padding:14px 10px;
    font-size:13px;
}
    </style>
</head>
<body>

<!-- SIDEBAR -->
   <!-- SIDEBAR -->
    <div class="sidebar">
        <h4><i class="fa-solid fa-clinic-medical"></i> APOTEK</h4>

        <a href="/dashboard_admin_elva" ><i class="fa fa-chart-line"></i> Dashboard</a>
        <a href="/admin_user_elva"><i class="fa fa-users"></i> Data User</a>
        <a href="/admin_obat_elva"><i class="fa fa-pills"></i> Data Obat</a>
        <a href="/admin_kategori_elva"><i class="fa fa-layer-group"></i> Kategori</a>
        <a href="/admin_transaksi_elva"><i class="fa fa-cash-register"></i> Transaksi</a>
        <a href="/admin_pengiriman_elva"class="active"><i class="fa fa-truck"></i> Pengiriman</a>
        <a href="/admin_gudang_elva"><i class="fa fa-warehouse"></i> Gudang</a>
        <!-- New Gudang Section -->
        <a href="/admin_peracik_elva"><i class="fa fa-stethoscope"></i> Data Resep + Racikan</a>
        <a href="/logout_elva"><i class="fa fa-sign-out-alt"></i> Logout</a>
    </div>

<!-- CONTENT -->
<div class="content">

    <!-- HEADER -->
    <div class="header-box">
        <h4 class="title mb-0">
            <i class="fa fa-truck me-2"></i> Data Pengiriman Online
        </h4>
    </div>

    <!-- CARD -->
    <div class="card-super">

        <div class="table-responsive">
            <table class="table table-hover align-middle">
                <thead class="table-primary">
                    <tr>
                        <th>No Faktur</th>
                        <th>Customer</th>
                        <th>Alamat</th>
                        <th>Total</th>
                        <th>Metode Bayar</th>
                        <th>No Resi</th>

                        <th>Status</th>
                        <th>Kurir</th>
                        <th>Foto Bukti</th>

                        <th>Aksi</th>

                    </tr>
                </thead>
                <tbody>

                    {% for p in pengiriman %}
                    <tr>
                        <td>{{ p.no_faktur_elva }}</td>
                        <td>{{ p.customer }}</td>
                        <td>{{ p.alamat_elva }}</td>
                        <td><strong>Rp {{ "{:,.0f}".format(p.total_elva) }}</strong></td>
                        <td>
                            {% if p.metode_bayar_elva == 'COD' %}
                                <span class="badge bg-danger">COD</span>
                            {% elif p.metode_bayar_elva == 'Transfer' %}
                                <span class="badge bg-success">Transfer</span>
                            {% else %}
                                <span class="badge bg-secondary">
                                    {{ p.metode_bayar_elva }}
                                </span>
                            {% endif %}
                        </td>

                        <td>{{ p.no_resi_elva or '-' }}</td>
                        <td>
                            <span class="badge bg-info">
                                {{ p.status_elva or 'Diproses' }}
                            </span>
                        </td>
                        <td>{{ p.nama_kurir or '-' }}</td>
                        <td>
                            {% if p.foto_bukti_elva %}
                                <button class="btn btn-success btn-sm"
                                        data-bs-toggle="modal"
                                        data-bs-target="#fotoModal{{ p.id_pengiriman_elva }}">
                                    <i class="fa fa-image"></i> Lihat
                                </button>

                                <!-- Modal -->
                                <div class="modal fade"
                                    id="fotoModal{{ p.id_pengiriman_elva }}"
                                    tabindex="-1">
                                    <div class="modal-dialog modal-dialog-centered modal-lg">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title">
                                                    Bukti Pengiriman - {{ p.no_resi_elva }}
                                                </h5>
                                                <button type="button"
                                                        class="btn-close"
                                                        data-bs-dismiss="modal"></button>
                                            </div>
                                            <div class="modal-body text-center">
                                                <img src="{{ url_for('static',
                                                    filename='bukti_pengiriman/' + p.foto_bukti_elva) }}"
                                                    class="img-fluid rounded shadow">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            {% else %}
                                <span class="badge bg-secondary">Belum Ada</span>
                            {% endif %}
                        </td>

                        <td>
                            {% if p.status_elva == 'diproses' %}
                                <form action="/admin_kemas_elva/{{ p.id_pengiriman_elva }}" method="POST">
                                    <button class="btn btn-warning btn-sm">
                                        <i class="fa fa-box"></i> Kemas
                                    </button>
                                </form>

                            {% elif p.status_elva == 'dikemas' %}
                                <form action="/admin_kirim_elva/{{ p.id_pengiriman_elva }}" method="POST">
                                    <button class="btn btn-primary btn-sm">
                                        <i class="fa fa-truck"></i> Kirim
                                    </button>
                                </form>
                            {% else %}
                                -
                            {% endif %}
                        </td>

                    </tr>
                    {% endfor %}

                    </tbody>

            </table>
        </div>

    </div>

</div>


<div class="bottom-nav">

    <a href="/dashboard_admin_elva"
       class="{% if request.path == '/dashboard_admin_elva' %}active{% endif %}">
        <i class="fa fa-home"></i>
        <span>Home</span>
    </a>

    <a href="/admin_user_elva"
       class="{% if request.path == '/admin_user_elva' %}active{% endif %}">
        <i class="fa fa-users"></i>
        <span>User</span>
    </a>

    <a href="/admin_obat_elva"
       class="{% if request.path == '/admin_obat_elva' %}active{% endif %}">
        <i class="fa fa-pills"></i>
        <span>Obat</span>
    </a>

    <a href="/admin_transaksi_elva"
       class="{% if request.path == '/admin_transaksi_elva' %}active{% endif %}">
        <i class="fa fa-cash-register"></i>
        <span>Transaksi</span>
    </a>

    <a data-bs-toggle="offcanvas" href="#menuLainnya" class="active">
        <i class="fa fa-bars"></i>
        <span>Lainnya</span>
    </a>

</div>
<!-- ================= OFFCANVAS MENU ================= -->
<div class="offcanvas offcanvas-bottom custom-offcanvas" tabindex="-1" id="menuLainnya">

    <div class="offcanvas-header">
        <h5 class="offcanvas-title">Menu Lainnya</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
    </div>

    <div class="offcanvas-body">

        <div class="list-group">

            <a href="/admin_kategori_elva" class="list-group-item list-group-item-action">
                <i class="fa fa-layer-group me-2"></i> Kategori
            </a>


            <a href="/admin_pengiriman_elva" class="list-group-item list-group-item-action">
                <i class="fa fa-truck me-2"></i> Pengiriman
            </a>

            <a href="/admin_gudang_elva" class="list-group-item list-group-item-action">
                <i class="fa fa-warehouse me-2"></i> Gudang
            </a>

            <a href="/admin_peracik_elva" class="list-group-item list-group-item-action">
                <i class="fa fa-stethoscope me-2"></i> Data Resep + Racikan
            </a>

            <a href="/logout_elva" class="list-group-item list-group-item-action text-danger">
                <i class="fa fa-sign-out-alt me-2"></i> Logout
            </a>

        </div>

    </div>
</div>
</body>
</html>
